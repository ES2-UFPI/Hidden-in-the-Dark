/*! For license information please see bundle.min.js.LICENSE.txt */
!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);const i=Phaser.GameObjects.Components.TransformMatrix;var r=new i,a=new i,h=new i,n={camera:r,sprite:a,calc:h},o=function(t,e,s){var i=r,o=a,l=h;return o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),i.copyFrom(e.matrix),s?(i.multiplyWithOffset(s,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),o.e=t.x,o.f=t.y):(o.e-=e.scrollX*t.scrollFactorX,o.f-=e.scrollY*t.scrollFactorY),i.multiply(o,l),n},l=function(t,e,s,i){e.updateData(),s.addToRenderList(e);var r=t.pipelines.set(e.pipeline),a=o(e,s,i),h=r.calcMatrix.copyFrom(a.calc),n=e._displayOriginX,l=e._displayOriginY,u=s.alpha*e.alpha;t.pipelines.preBatch(e);for(var d=e.geom,c=0,p=d.length;c<p;c++)d[c].webglRender(r,h,u,n,l);t.pipelines.postBatch(e)};const u=Phaser.Renderer.Canvas.SetTransform;var d={renderWebGL:l,renderCanvas:function(t,e,s,i){e.updateData(),s.addToRenderList(e);var r=t.currentContext;if(u(t,r,e,s,i)){for(var a=e._displayOriginX,h=e._displayOriginY,n=e.geom,o=0,l=n.length;o<l;o++)n[o].canvasRender(r,a,h);r.restore()}}},c=function(t){if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e]};const p=Phaser.GameObjects.Shape,y=Phaser.Utils.Array.Remove;class m extends p{constructor(t,e,s,i,r){void 0===e&&(e=0),void 0===s&&(s=0),void 0===i&&(i=0),void 0===r&&(r=i),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,s),this.setSize(i,r),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return void 0===t&&(t=!0),this.dirty=t,this}setSize(t,e){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=e,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}setFillStyle(t,e){return void 0===e&&(e=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==e,this.fillColor=t,this.fillAlpha=e,this}setStrokeStyle(t,e,s){return void 0===s&&(s=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==e||this.strokeAlpha!==s,this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=s,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,e=0,s=t.length;e<s;e++){var i=t[e];i.dirty&&i.updateData()}return this.dirty=!1,this.isSizeChanged=!1,this}clear(){return this.geom.length=0,c(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var e=t.name;return e&&(this.shapes[e]=t),this.dirty=!0,this}deleteShape(t){var e=this.getShape(t);return e&&(delete this.shapes[t],y(this.geom,e)),this}}Object.assign(m.prototype,d);var g=m,v={fillStyle:function(t,e){return void 0===t?this.isFilled=!1:(void 0===e&&(e=1),this.isFilled=!0,this.fillColor=t,this.fillAlpha=e),this},lineStyle:function(t,e,s){return void 0===t||void 0===e?this.isStroked=!1:(void 0===s&&(s=1),this.isStroked=!0,this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=s),this}},f={setData:function(t,e){return void 0===this.data&&(this.data={}),this.data[t]=e,this},getData:function(t,e){return void 0===this.data&&(this.data={}),this.data.hasOwnProperty(t)||(this.data[t]=e),this.data[t]}};class k{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle(),this.lineStyle(),this}webglRender(t,e,s,i,r){}canvasRender(t,e,s){}updateData(){}}Object.assign(k.prototype,v,f);var _=k,w=Phaser.Renderer.WebGL.Utils,b=function(t,e,s,i,r,a){for(var h=w.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*i),n=s.pathData,o=s.pathIndexes,l=0;l<o.length;l+=3){var u=2*o[l],d=2*o[l+1],c=2*o[l+2],p=n[u+0]-r,y=n[u+1]-a,m=n[d+0]-r,g=n[d+1]-a,v=n[c+0]-r,f=n[c+1]-a,k=e.getX(p,y),_=e.getY(p,y),b=e.getX(m,g),C=e.getY(m,g),S=e.getX(v,f),P=e.getY(v,f);t.batchTri(s,k,_,b,C,S,P,0,0,1,1,h,h,h,2)}},C=Phaser.Renderer.WebGL.Utils,S=function(t,e,s,i,r){var a=t.strokeTint,h=C.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*s);a.TL=h,a.TR=h,a.BL=h,a.BR=h;var n=e.pathData,o=n.length-1,l=e.lineWidth,u=l/2,d=n[0]-i,c=n[1]-r;e.closePath||(o-=2);for(var p=2;p<o;p+=2){var y=n[p]-i,m=n[p+1]-r;t.batchLine(d,c,y,m,u,u,l,p-2,!!e.closePath&&p===o-1),d=y,c=m}},P=function(t,e,s,i){var r=s||e.fillColor,a=i||e.fillAlpha,h=(16711680&r)>>>16,n=(65280&r)>>>8,o=255&r;t.fillStyle="rgba("+h+","+n+","+o+","+a+")"},D=function(t,e,s,i){var r=s||e.strokeColor,a=i||e.strokeAlpha,h=(16711680&r)>>>16,n=(65280&r)>>>8,o=255&r;t.strokeStyle="rgba("+h+","+n+","+o+","+a+")",t.lineWidth=e.lineWidth};const E=Phaser.Geom.Polygon.Earcut;var T=class extends _{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=E(this.pathData),this}webglRender(t,e,s,i,r){this.isFilled&&b(t,e,this,s,i,r),this.isStroked&&S(t,this,s,i,r)}canvasRender(t,e,s){var i=this.pathData,r=i.length-1,a=i[0]-e,h=i[1]-s;t.beginPath(),t.moveTo(a,h),this.closePath||(r-=2);for(var n=2;n<r;n+=2){var o=i[n]-e,l=i[n+1]-s;t.lineTo(o,l)}this.closePath&&t.closePath(),this.isFilled&&(P(t,this),t.fill()),this.isStroked&&(D(t,this),t.stroke())}},R=function(t,e,s){var i=s.length;if(i>=2){var r=s[i-2],a=s[i-1];if(t===r&&e===a)return s}return s.push(t,e),s};const A=Phaser.Math.DegToRad;var x=function(t,e,s,i,r,a,h,n,o){h&&a>r?a-=360:!h&&a<r&&(a+=360);var l=A(a-r)/n;r=A(r);for(var u=0;u<=n;u++){var d=r+l*u,c=t+s*Math.cos(d),p=e+i*Math.sin(d);R(c,p,o)}return o};const V=Phaser.Math.DegToRad;var F=class extends T{constructor(t,e,s,i,r,a,h,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===s&&(s=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=360),void 0===h&&(h=!1),void 0===n&&(n=!1),super(),this.setCenterPosition(t,e),this.setRadius(s,i),this.setAngle(r,a,h),this.setPie(n),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,e){return void 0===e&&(e=t),this.radiusX=t,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,e,s){return void 0===s&&(s=!1),this.startAngle=t,this.endAngle=e,this.anticlockwise=s,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return void 0===t&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),x(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,e,s){t.beginPath();var i=this.x-e,r=this.y-s,a=V(this.startAngle),h=V(this.endAngle);this.pie&&(t.moveTo(i,r),t.lineTo(i+Math.cos(a)*this.radiusX,r+Math.sin(a)*this.radiusY)),t.ellipse(i,r,this.radiusX,this.radiusY,0,a,h,this.anticlockwise),this.pie&&t.lineTo(i,r),this.isFilled&&(P(t,this),t.fill()),this.isStroked&&(D(t,this),t.stroke())}};var O=class extends F{constructor(t,e,s){super(t,e,s,s,0,360)}};Phaser.Math.Interpolation.QuadraticBezier;Phaser.Math.RotateAround;Phaser.Geom.Polygon;Phaser.Math.DegToRad;Phaser.Math.Distance.Between,Phaser.Math.Linear;Phaser.Renderer.WebGL.Utils;Phaser.Renderer.WebGL.Utils;var j={setEventEmitter(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};const M=Phaser.Scene;var I=function(t){return t instanceof M},L=function(t){return null==t||"object"!=typeof t?null:I(t)?t:t.scene&&I(t.scene)?t.scene:t.parent&&t.parent.scene&&I(t.parent.scene)?t.parent.scene:void 0};const X=Phaser.Utils.Objects.GetValue;class Y{constructor(t,e){this.parent=t,this.scene=L(t),this.isShutdown=!1,this.setEventEmitter(X(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,e){this.destroy(e)}}Object.assign(Y.prototype,j);var z=Y;const N=Phaser.Utils.Objects.GetValue;const G={no:0,lazy:1,always:2};var W=class extends z{constructor(t,e){super(t,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(N(e,"tickingMode",1))}boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){"string"==typeof t&&(t=G[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}};var B=class extends W{startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.events.off("update",this.update,this)}};const U=Phaser.Utils.Objects.GetValue,J=Phaser.Math.Clamp;const K=0,H=1,q=2,Q=-1;var Z=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=U(t,"state",K),this.timeScale=U(t,"timeScale",1),this.delay=U(t,"delay",0),this.repeat=U(t,"repeat",0),this.repeatCounter=U(t,"repeatCounter",0),this.duration=U(t,"duration",0),this.nowTime=U(t,"nowTime",0),this.justRestart=U(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return void 0===t&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?q:H,this.repeatCounter=0,this}stop(){return this.state=K,this}update(t,e){this.state!==K&&this.state!==Q&&0!==e&&0!==this.timeScale&&(this.nowTime+=e*this.timeScale,this.state=this.nowTime>=0?q:H,this.justRestart=!1,this.nowTime>=this.duration&&(-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=Q)))}get t(){var t;switch(this.state){case K:case H:t=0;break;case q:t=this.nowTime/this.duration;break;case Q:t=1}return J(t,0,1)}set t(t){(t=J(t,-1,1))<0?(this.state=H,this.nowTime=-this.delay*t):(this.state=q,this.nowTime=this.duration*t,1===t&&0!==this.repeat&&this.repeatCounter++)}get isIdle(){return this.state===K}get isDelay(){return this.state===H}get isCountDown(){return this.state===q}get isRunning(){return this.state===H||this.state===q}get isDone(){return this.state===Q}get isOddIteration(){return 1==(1&this.repeatCounter)}get isEvenIteration(){return 0==(1&this.repeatCounter)}};var $=class extends B{constructor(t,e){super(t,e),this.timer=new Z}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}};const tt=Phaser.Utils.Objects.GetValue,et=Phaser.Utils.Objects.GetAdvancedValue,st=Phaser.Tweens.Builders.GetEaseFunction;var it=class extends ${resetFromJSON(t){return this.timer.resetFromJSON(tt(t,"timer")),this.setEnable(tt(t,"enable",!0)),this.setDelay(et(t,"delay",0)),this.setDuration(et(t,"duration",1e3)),this.setEase(tt(t,"ease","Linear")),this.setRepeat(tt(t,"repeat",0)),this}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setEase(t){return void 0===t&&(t="Linear"),this.ease=t,this.easeFn=st(t),this}setRepeat(t){return this.repeat=t,this}start(){return this.timer.isRunning||super.start(),this}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}update(t,e){if(!this.isRunning||!this.enable)return this;var s=this.parent;if(!s.active)return this;var i=this.timer;return i.update(t,e),i.isDelay||this.updateGameObject(s,i),this.emit("update",s,this),i.isDone&&this.complete(),this}updateGameObject(t,e){}};const rt=Phaser.Utils.Objects.GetValue,at=Phaser.Math.Linear;var ht=class extends it{constructor(t,e){super(t,e),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var e=this.parent;this.propertyKey=rt(t,"key","value");var s=e[this.propertyKey];return this.fromValue=rt(t,"from",s),this.toValue=rt(t,"to",s),this.setEase(rt(t,"ease",this.ease)),this.setDuration(rt(t,"duration",this.duration)),this.timer.setDuration(this.duration),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,e){var s=e.t;s=this.easeFn(s),t[this.propertyKey]=at(this.fromValue,this.toValue,s)}},nt={setEaseValuePropName:function(t){return this.easeValuePropName=t,this},setEaseValueDuration:function(t){return this.easeValueDuration=t,this},setEaseValueFunction:function(t){return this.easeFunction=t,this},stopEaseValue:function(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo:function(t,e,s){return null==t||(void 0!==e&&(t=Percent(t,e,s)),void 0===this.easeValueTask&&(this.easeValueTask=new ht(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:t,duration:this.easeValueDuration,ease:this.easeFunction})),this}};const ot=Phaser.Utils.Objects.GetValue,lt=Phaser.Utils.Objects.IsPlainObject,ut=Phaser.Math.Clamp,dt=Phaser.Math.Linear,ct=Phaser.Math.Percent,pt=Phaser.Math.DegToRad(270),yt=Phaser.Math.RadToDeg;class mt extends g{constructor(t,e,s,i,r,a,h){lt(e)&&(e=ot(h=e,"x",0),s=ot(h,"y",0),i=ot(h,"radius",1),r=ot(h,"barColor",void 0),a=ot(h,"value",0));var n=2*i;super(t,e,s,n,n),this.type="rexCircularProgress",this.eventEmitter=ot(h,"eventEmitter",this),this.addShape((new O).setName("track")).addShape((new F).setName("bar")).addShape((new O).setName("center")),this.setRadius(i),this.setTrackColor(ot(h,"trackColor",void 0)),this.setBarColor(r),this.setCenterColor(ot(h,"centerColor",void 0)),this.setThickness(ot(h,"thickness",.2)),this.setStartAngle(ot(h,"startAngle",pt)),this.setAnticlockwise(ot(h,"anticlockwise",!1));var o=ot(h,"valuechangeCallback",null);if(null!==o){var l=ot(h,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,l)}this.setEaseValuePropName("value").setEaseValueDuration(ot(h,"easeValue.duration",0)).setEaseValueFunction(ot(h,"easeValue.ease","Linear")),this.setValue(a)}resize(t,e){return(t=Math.floor(Math.min(t,e)))===this.width||(super.resize(t,t),this.setRadius(t/2)),this}get value(){return this._value}set value(t){t=ut(t,0,1);var e=this._value,s=e!=t;this.dirty=this.dirty||s,this._value=t,s&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,s){return null==t||(void 0!==e&&(t=ct(t,e,s)),this.value=t),this}addValue(t,e,s){return void 0!==e&&(t=ct(t,e,s)),this.value+=t,this}getValue(t,e){var s=this.value;return void 0!==t&&(s=dt(t,e,s)),s}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=2*t;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return void 0===t&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=ut(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}updateShapes(){var t=this.radius,e=this.thickness*this.radius,s=this.radius-e/2,i=this.radius-e,r=this.getShape("track");this.trackColor&&e>0?r.setCenterPosition(t,t).setRadius(s).lineStyle(e,this.trackColor):r.reset();var a=this.getShape("bar");if(this.barColor&&s>0){var h,n,o;if(1===this.value)h=!1,n=0,o=360;else h=this.anticlockwise,n=yt(this.startAngle),o=360*(h?1-this.value:this.value)+n;a.setCenterPosition(t,t).setRadius(s).setAngle(n,o,h).lineStyle(e,this.barColor)}else a.reset();var l=this.getShape("center");this.centerColor&&i>0?l.setCenterPosition(t,t).setRadius(i).fillStyle(this.centerColor):l.reset()}}Object.assign(mt.prototype,nt);class gt{constructor(t,e,s){this.game=t,this.id=e,this.name="player_"+e,this.caminho="./src/assets/players/player_"+e+".png",this.velocidade=s,this.player=void 0,this.prevVelocity=void 0,this.prevDir="l"}preload(){this.game.load.spritesheet(this.name,this.caminho,{frameWidth:16,frameHeight:24})}create(t,e){this.player=this.game.physics.add.sprite(t,e,this.name),this.player.depth=10;const s=this.game.anims;s.create({key:"leftWalk",frames:s.generateFrameNames(this.name,{start:19,end:16}),frameRate:10,repeat:-1}),s.create({key:"rightWalk",frames:s.generateFrameNames(this.name,{start:12,end:15}),frameRate:10,repeat:-1}),s.create({key:"leftIdle",frames:s.generateFrameNames(this.name,{start:8,end:11}),frameRate:10,repeat:-1}),s.create({key:"rightIdle",frames:s.generateFrameNames(this.name,{start:4,end:7}),frameRate:10,repeat:-1}),this.player.anims.play("rightIdle",!0)}update(t){this.prevVelocity=this.player.body.velocity.clone(),this.prevDir=this.player.anims.currentAnim.key.toString()[0],this.player.body.setVelocity(0);var e=Math.sqrt(this.velocidade**2*2)/2;t.left.isDown&&t.down.isDown?(this.player.body.setVelocityX(-e),this.player.body.setVelocityY(e)):t.left.isDown&&t.up.isDown?(this.player.body.setVelocityX(-e),this.player.body.setVelocityY(-e)):t.right.isDown&&t.down.isDown?(this.player.body.setVelocityX(e),this.player.body.setVelocityY(e)):t.right.isDown&&t.up.isDown?(this.player.body.setVelocityX(e),this.player.body.setVelocityY(-e)):t.left.isDown?this.player.body.setVelocityX(-this.velocidade):t.right.isDown?this.player.body.setVelocityX(this.velocidade):t.up.isDown?this.player.body.setVelocityY(-this.velocidade):t.down.isDown&&this.player.body.setVelocityY(this.velocidade),t.left.isDown?this.player.anims.play("leftWalk",!0):t.right.isDown?this.player.anims.play("rightWalk",!0):t.up.isDown||t.down.isDown?"l"==this.prevDir?this.player.anims.play("leftWalk",!0):this.player.anims.play("rightWalk",!0):(this.prevVelocity.x<0?this.player.anims.play("leftIdle",!0):this.prevVelocity.x>0?this.player.anims.play("rightIdle",!0):(this.prevVelocity.y<0||this.prevVelocity.y>0)&&("l"==this.prevDir?this.player.anims.play("leftIdle",!0):this.player.anims.play("rightIdle",!0)),"l"==this.prevDir?this.player.anims.play("leftIdle",!0):this.player.anims.play("rightIdle",!0))}interactions(t){}}class vt extends gt{constructor(t,e,s){super(t,e,s),this.lastChest=null,this.abrindo=!1}interactions(t){super.interactions(t),this.circularProgress=void 0,t.forEach(t=>{this.game.physics.add.overlap(this.player,t.zone,()=>{this.lastChest=t})})}preload(){this.game.load.plugin("rexcircularprogressplugin","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexcircularprogressplugin.min.js",!0),super.preload()}update(t){if(t.space.isDown){if(this.abrindo)return"l"==this.prevDir?this.player.anims.play("leftIdle",!0):this.player.anims.play("rightIdle",!0),void this.player.body.setVelocity(0);if(null!=this.lastChest&&this.game.physics.overlap(this.player,this.lastChest.zone)&&!this.abrindo&&!this.lastChest.is_open)return this.circularProgress=this.game.add.rexCircularProgress({x:570,y:420,radius:20,trackColor:2493956,barColor:8085079,centerColor:5125166,value:0,valuechangeCallback:(t,e,s)=>{1==t&&this.abrirBau()}}),this.game.tweens.add({targets:this.circularProgress,value:1,duration:1e3}),this.circularProgress.setScrollFactor(0,0),this.abrindo=!0,this.player.anims.play("leftIdle",!0),void this.player.body.setVelocity(0)}else this.abrindo&&(this.circularProgress.destroy(),this.abrindo=!1);super.update(t)}abrirBau(){null!=this.lastChest&&(this.lastChest.open(),this.abrindo=!1,this.circularProgress.destroy())}}class ft{constructor(t,e,s){this.game=t,this.id=e,this.coord=s,this.caminho="./src/assets/items/chest.png",this.name="chest-"+this.id,this.is_open=!1}preload(){this.game.load.image(this.name+"-zone","./src/assets/items/chest-zone.png"),this.game.load.spritesheet(this.name,this.caminho,{frameWidth:54,frameHeight:54})}create(){this.chest=this.game.physics.add.staticSprite(this.coord.x,this.coord.y,this.name),this.zone=this.game.physics.add.staticImage(this.coord.x,this.coord.y,this.name+"-zone"),this.zone.setVisible(!1);const t=this.game.anims;t.create({key:"close",frames:t.generateFrameNames(this.name,{start:77,end:77}),frameRate:10,repeat:-1}),t.create({key:"open",frames:t.generateFrameNames(this.name,{start:77,end:81}),frameRate:10}),this.chest.anims.play("close",!0)}open(){0==this.is_open&&(this.chest.anims.play("open",!0),this.is_open=!0,this.game.addKey())}}class kt extends Phaser.Scene{constructor(){super(),this.keys=0;this.player=new vt(this,2,200),this.chests=[];for(var t=0;t<10;t++)this.chests.push(new ft(this,t,locations[t]))}preload(){this.load.image("tiles","./src/assets/map/assetsmap.png"),this.load.tilemapTiledJSON("map","./src/assets/map/map.json"),this.player.preload()}create(){const t=this.make.tilemap({key:"map"}),e=t.addTilesetImage("assetsmap","tiles"),s=(t.createLayer("ground",e,0,0),t.createLayer("objectCollider",e,0,0));s.setCollisionByProperty({collider:!0}),this.player.create(1834,527),this.physics.add.collider(this.player.player,s);const i=this.cameras.main.setZoom(2);i.startFollow(this.player.player),i.setBounds(0,0,t.widthInPixels,t.heightInPixels),this.keysText=this.add.text(210,155,"keys: "+this.keys,{fontSize:"20px",fill:"#FFFFFF"}),this.keysText.setScrollFactor(0,0)}update(){this.keysText.setText("keys: "+this.keys);var t=this.input.keyboard.createCursorKeys();this.player.update(t)}addKey(){this.keys+=1}}const _t={type:Phaser.WEBGL,parent:"Hidden-in-the-Dark",width:800,height:600,scene:[new kt({key:"partida"})],physics:{default:"arcade",arcade:{gravity:{y:0}}}};new Phaser.Game(_t)}]);